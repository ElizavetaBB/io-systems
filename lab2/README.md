# Лабораторная работа 2

**Название:** "Разработка драйверов блочных устройств"

**Цель работы:** получить знания и навыки разработки драйверов блочных устройств для операционной системы Linux.

## Описание функциональности драйвера

1. Драйвер создает виртуальный жесткий диск в оперативной  памяти с размером 50 Мбайт. 
2. Созданный диск разбит на один первичный раздел размером 20Мбайт и один расширенный раздел, содержащий три логических раздела размером 10Мбайт каждый.

## Инструкция по сборке
### Сборка модуля
```
make
```
### Установка модуля
```
make install
```
### Выгрузка модуля
```
make remove
```
## Профилирование
### Запуск скрипта профилирования
```
bash copy_files.sh
```
### Форматирование разделов диска
```
sudo mkfs.vfat /dev/'Название_раздела'
```
### Создание файловой системы
```
sudo mkdir -p /mnt/'Название_раздела'
```
### Монтирование
```
sudo mount /dev/'Название_раздела' /mnt/'Название раздела'
```
### Заполнение файлов рандомными данными
```
sudo dd if=/dev/urandom of=/mnt/'Название_раздела'/tfile bs=1M count=7
```
### Копирование между разделами виртуального диска с измерением скорости передачи
```
sudo dd if=/mnt/'Название_раздела'/tfile of=/mnt/'Название_раздела'/tfile bs=1M count=7
```
### Копирование между разделами вирт. и реального жесткого диска с измерением скорости
```
sudo dd if=/mnt/'Название_раздела'/tfile of=/mnt/testfile bs=1M count=7
```
## Примеры использования
### Скорость передачи между разделами виртуального диска
![image](https://user-images.githubusercontent.com/56157675/117960353-1ae1fd00-b347-11eb-8015-51903aec0ade.png)
### Скорость передачи между разделами вирт. и реального жесткого диска
![image](https://user-images.githubusercontent.com/56157675/117960498-3c42e900-b347-11eb-8e10-1acec4b836a2.png)
### Проверка созданного диска
```
sudo fdisk -l /dev/mydisk
```
![image](https://user-images.githubusercontent.com/56157675/117960713-7a400d00-b347-11eb-9267-2685c16c40d5.png)
### Проверка точек монтирования
```
df -h | grep '/dev/mydisk'
```
![image](https://user-images.githubusercontent.com/56157675/117960884-af4c5f80-b347-11eb-98f0-2b845f0fcd49.png)
